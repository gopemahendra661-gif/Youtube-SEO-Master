<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube SEO Master - AI Powered SEO Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        'primary-indigo': '#4f46e5',
                        'dark-bg': '#0f172a',
                        'dark-card': '#1e293b',
                    }
                }
            }
        }
    </script>
    <style>
        .ad-banner {
            height: 50px;
            width: 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #93c5fd;
            background: #e0f2fe;
            color: #1e3a8a;
            font-size: 12px;
            text-align: center;
            border-radius: 8px;
            margin: 0 auto;
        }
        .dark .ad-banner {
            border-color: #7c3aed;
            background: #1e293b;
            color: #93c5fd;
        }
        
        .copy-button {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 600;
            color: #ffffff;
            background-color: #4f46e5;
            border-radius: 6px;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-dark-bg font-sans min-h-screen p-4 text-gray-900 dark:text-gray-100">
    
    <!-- Header Ad Banner -->
    <div class="max-w-4xl mx-auto mb-4 text-center">
        <div class="ad-banner">
           <script type="text/javascript">
	atOptions = {
		'key' : '46925369ed067dc1f70d7ff81521da92',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/46925369ed067dc1f70d7ff81521da92/invoke.js"></script>
        </div>
    </div>

    <!-- Main Header -->
    <header class="max-w-4xl mx-auto mb-6 text-center">
        <div class="flex items-center justify-center space-x-3 bg-white dark:bg-dark-card p-4 rounded-xl shadow-lg">
            <svg class="w-8 h-8 text-primary-indigo" fill="currentColor" viewBox="0 0 24 24">
                <path d="M10 15v-4.5H9v4.5a1 1 0 001 1h4a1 1 0 001-1v-4.5h-1v4.5h-3zM21 3H3C1.89 3 1 3.89 1 5v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm-9 16c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
            </svg>
            <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-50">YouTube SEO Master</h1>
        </div>
    </header>

    <!-- Main Application Card -->
    <main class="max-w-4xl mx-auto bg-white dark:bg-dark-card p-6 rounded-2xl shadow-lg">
        <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Instantly generate high-ranking titles, descriptions, keywords, and hashtags for your video.</p>
        
        <form id="optimizerForm">
            <div class="mb-4">
                <label for="prompt" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Video Topic/Title</label>
                <textarea id="prompt" rows="3" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none" placeholder="E.g., How to Edit Videos Faster in Premiere Pro"></textarea>
            </div>
            
            <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="languageSelect" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Output Language</label>
                    <select id="languageSelect" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                        <option value="English" selected>English</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Spanish">Spanish</option>
                    </select>
                </div>
                <div>
                    <label for="modelSelect" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">AI Model</label>
                    <select id="modelSelect" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                        <option value="auto">Automatic (Recommended)</option>
                        <option value="deepseek/deepseek-r1">DeepSeek R1</option>
                        <option value="mistralai/mixtral-8x7b-instruct">Mixtral 8x7B</option>
                    </select>
                </div>
            </div>

            <button type="submit" id="generateButton" class="w-full bg-primary-indigo text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition duration-200">
                <span id="buttonText">Generate YouTube SEO Content</span>
            </button>
        </form>

        <!-- Loading and Error Messages -->
        <div id="statusMessage" class="mt-4 text-center text-sm font-medium text-red-600 dark:text-red-400 hidden"></div>
        <div id="processingIndicator" class="mt-4 text-center text-primary-indigo dark:text-indigo-400 hidden">
            <svg class="animate-spin h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span id="loadingText">Processing...</span>
        </div>
    </main>
    
    <!-- Results Area -->
    <div id="results" class="max-w-4xl mx-auto mt-6 space-y-4"></div>
    
    <!-- Footer Ad Banner -->
    <div class="max-w-4xl mx-auto mt-8 mb-4 text-center">
        <div class="ad-banner">
            <script type="text/javascript">
	atOptions = {
		'key' : '46925369ed067dc1f70d7ff81521da92',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/46925369ed067dc1f70d7ff81521da92/invoke.js"></script>
        </div>
    </div>

    <script>
        // API Configuration - GitHub Pages Compatible
        const API_KEY = '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'; 
        const BASE_URL = "https://openrouter.ai/api/v1/chat/completions";

        const FREE_MODELS = [
            "deepseek/deepseek-r1",
            "mistralai/mixtral-8x7b-instruct", 
            "meta-llama/llama-3-8b-instruct"
        ];
        
        // DOM Elements
        const form = document.getElementById('optimizerForm');
        const promptInput = document.getElementById('prompt');
        const generateButton = document.getElementById('generateButton');
        const buttonText = document.getElementById('buttonText');
        const processingIndicator = document.getElementById('processingIndicator');
        const loadingText = document.getElementById('loadingText');
        const statusMessage = document.getElementById('statusMessage');
        const resultsDiv = document.getElementById('results');

        // Utility Functions
        function setAppState(isLoading, message = '') {
            generateButton.disabled = isLoading;
            processingIndicator.classList.toggle('hidden', !isLoading);
            
            if (isLoading) {
                loadingText.textContent = message || "Processing...";
                buttonText.innerHTML = '<svg class="animate-spin h-4 w-4 mr-2 inline-block" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generating...';
            } else {
                buttonText.textContent = 'Generate YouTube SEO Content';
            }
        }

        // Copy Function
        function copyContent(text, buttonElement) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = buttonElement.innerHTML;
                buttonElement.innerHTML = '‚úì Copied!';
                buttonElement.style.background = '#10b981';
                
                setTimeout(() => {
                    buttonElement.innerHTML = originalText;
                    buttonElement.style.background = '';
                }, 2000);
            });
        }

        // GitHub Pages Compatible API Call
        async function callApiWithRetry(model, prompt, language, retryCount = 0) {
            const systemPrompt = `You are a YouTube SEO expert. Generate SEO content in ${language} for: "${prompt}"
            
            Return ONLY JSON:
            {
                "seo_titles": "Title 1, Title 2, Title 3",
                "description": "Full description here...",
                "hashtags": "#tag1, #tag2, #tag3", 
                "keywords": "keyword1, keyword2, keyword3"
            }`;
            
            const payload = {
                model: model,
                messages: [
                    { role: "system", content: systemPrompt },
                    { role: "user", content: `Generate YouTube SEO for: ${prompt}` }
                ],
                temperature: 0.7,
                max_tokens: 1500
            };

            try {
                console.log('API Request to:', BASE_URL);
                
                const response = await fetch(BASE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`,
                        'HTTP-Referer': window.location.origin,
                        'X-Title': 'YouTube SEO Master',
                        'Origin': window.location.origin
                    },
                    mode: 'cors',
                    body: JSON.stringify(payload)
                });

                console.log('Response status:', response.status);

                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('API Error:', errorText);
                    throw new Error(`API Error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                console.log('API Success:', data);

                if (data.choices && data.choices[0] && data.choices[0].message) {
                    return {
                        model: model,
                        content: data.choices[0].message.content
                    };
                }
                
                throw new Error('No content in response');

            } catch (error) {
                console.error('API Call failed:', error);
                if (retryCount < 2) {
                    console.log(`Retrying... (${retryCount + 1})`);
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    return callApiWithRetry(model, prompt, language, retryCount + 1);
                }
                throw error;
            }
        }

        // Main Function with Better Error Handling
        async function generateResponse(e) {
            e.preventDefault();
            resultsDiv.innerHTML = '';
            statusMessage.classList.add('hidden');
            
            const userPrompt = promptInput.value.trim();
            const selectedModel = document.getElementById('modelSelect').value;
            const selectedLanguage = document.getElementById('languageSelect').value;

            if (!userPrompt) {
                statusMessage.textContent = "Please enter your Video Topic/Title.";
                statusMessage.classList.remove('hidden');
                return;
            }

            setAppState(true, `Generating content in ${selectedLanguage}...`);

            try {
                let finalResult = null;
                let modelsToTry = selectedModel === 'auto' ? FREE_MODELS : [selectedModel];

                for (const model of modelsToTry) {
                    console.log(`Trying model: ${model}`);
                    loadingText.textContent = `Trying ${model.split('/')[1] || model}...`;
                    
                    try {
                        finalResult = await callApiWithRetry(model, userPrompt, selectedLanguage);
                        if (finalResult) {
                            console.log('Success with model:', model);
                            break;
                        }
                    } catch (error) {
                        console.error(`Model ${model} failed:`, error);
                        continue;
                    }
                }

                if (!finalResult) {
                    // Use fallback if all models fail
                    console.log('All models failed, using fallback');
                    const fallbackData = createFallbackResponse(userPrompt, selectedLanguage);
                    displayResults(fallbackData, 'Fallback Generator');
                    return;
                }

                // Parse JSON response
                let jsonContent;
                try {
                    let cleanContent = finalResult.content.replace(/```json\s*|\s*```/g, '').trim();
                    jsonContent = JSON.parse(cleanContent);
                    console.log('Parsed JSON successfully');
                } catch (parseError) {
                    console.error('JSON Parse error, using fallback:', parseError);
                    jsonContent = createFallbackResponse(userPrompt, selectedLanguage);
                }

                displayResults(jsonContent, finalResult.model);

            } catch (error) {
                console.error('Generation error:', error);
                statusMessage.textContent = "Error: " + error.message;
                statusMessage.classList.remove('hidden');
                
                // Show fallback content on error
                const fallbackData = createFallbackResponse(userPrompt, selectedLanguage);
                displayResults(fallbackData, 'Fallback Generator');
            } finally {
                setAppState(false);
            }
        }

        // Fallback response
        function createFallbackResponse(prompt, language) {
            return {
                seo_titles: `${prompt} - Complete Guide, How to ${prompt} - Step by Step, ${prompt} Tutorial 2024`,
                description: `Welcome to our channel! In this video, we cover everything about ${prompt}. Learn professional techniques and best practices.\n\nWhat you'll learn:\n‚Ä¢ Introduction to ${prompt}\n‚Ä¢ Step-by-step process\n‚Ä¢ Tips and tricks\n‚Ä¢ Common mistakes to avoid\n\nDon't forget to LIKE üëç, SUBSCRIBE üîî, and hit the NOTIFICATION BELL!\n\nConnect with us:\n[Your Social Media Links]\n\n#${prompt.replace(/\s+/g, '')} #YouTubeTips #HowTo`,
                hashtags: `#${prompt.replace(/\s+/g, '')}, #YouTube, #Tutorial, #HowTo, #Tips, #2024`,
                keywords: `${prompt}, youtube tutorial, how to, step by step, guide, tips, tricks, 2024`
            };
        }

        function displayResults(data, modelUsed) {
            console.log('Displaying results:', data);
            
            const seoTitles = data.seo_titles || 'No titles generated';
            const description = data.description || 'No description generated';
            const hashtags = data.hashtags || 'No hashtags generated';
            const keywords = data.keywords || 'No keywords generated';

            const outputHTML = `
                <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-2xl border-2 border-green-500">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 text-center">‚úÖ YouTube SEO Content Generated!</h2>
                    
                    <!-- SEO Titles -->
                    <div class="mb-6 p-4 bg-white dark:bg-dark-card rounded-xl border border-blue-200 dark:border-blue-800">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-bold text-lg text-blue-600 dark:text-blue-400">‚ú® SEO Title Suggestions</h3>
                            <button class="copy-button" onclick="copyContent('${seoTitles.replace(/'/g, "\\'")}', this)">
                                Copy All
                            </button>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            ${seoTitles.split(',').map(title => 
                                `<span class="inline-block bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm px-3 py-1 rounded-lg">${title.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <!-- Description -->
                    <div class="mb-6 p-4 bg-white dark:bg-dark-card rounded-xl border border-green-200 dark:border-green-800">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-bold text-lg text-green-600 dark:text-green-400">üìù Video Description</h3>
                            <button class="copy-button" onclick="copyContent('${description.replace(/'/g, "\\'")}', this)">
                                Copy All
                            </button>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-800 p-3 rounded-lg">
                            <p class="text-gray-700 dark:text-gray-300 whitespace-pre-wrap">${description}</p>
                        </div>
                    </div>
                    
                    <!-- Keywords -->
                    <div class="mb-6 p-4 bg-white dark:bg-dark-card rounded-xl border border-purple-200 dark:border-purple-800">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-bold text-lg text-purple-600 dark:text-purple-400">üè∑Ô∏è Keywords & Tags</h3>
                            <button class="copy-button" onclick="copyContent('${keywords.replace(/'/g, "\\'")}', this)">
                                Copy All
                            </button>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            ${keywords.split(',').map(keyword => 
                                `<span class="inline-block bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm px-3 py-1 rounded-lg">${keyword.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <!-- Hashtags -->
                    <div class="p-4 bg-white dark:bg-dark-card rounded-xl border border-pink-200 dark:border-pink-800">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-bold text-lg text-pink-600 dark:text-pink-400">#Ô∏è‚É£ Hashtags</h3>
                            <button class="copy-button" onclick="copyContent('${hashtags.replace(/'/g, "\\'")}', this)">
                                Copy All
                            </button>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            ${hashtags.split(',').map(hashtag => 
                                `<span class="inline-block bg-pink-100 dark:bg-pink-900 text-pink-800 dark:text-pink-200 text-sm px-3 py-1 rounded-lg">${hashtag.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-yellow-50 dark:bg-yellow-900 rounded-xl text-center">
                        <p class="text-sm text-yellow-800 dark:text-yellow-200">
                            *AI-Generated Content - Please review before use<br>
                            <span class="font-mono text-primary-indigo dark:text-primary-purple">Model: ${modelUsed}</span>
                        </p>
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML = outputHTML;
        }

        // Event Listeners
        form.addEventListener('submit', generateResponse);
        window.copyContent = copyContent;

        console.log('YouTube SEO Master loaded - GitHub Pages Version');
    </script>
</body>
</html>
