<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube SEO Master - AI Powered SEO Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        'primary-indigo': '#4f46e5',
                        'dark-bg': '#0f172a',
                        'dark-card': '#1e293b',
                    }
                }
            }
        }
    </script>
    <style>
        .ad-banner {
            height: 50px;
            width: 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #93c5fd;
            background: #e0f2fe;
            color: #1e3a8a;
            font-size: 12px;
            text-align: center;
            border-radius: 8px;
            margin: 0 auto;
        }
        .copy-button {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 600;
            color: #ffffff;
            background-color: #4f46e5;
            border-radius: 6px;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-dark-bg font-sans min-h-screen p-4 text-gray-900 dark:text-gray-100">
    
    <!-- Header -->
    <header class="max-w-4xl mx-auto mb-6 text-center">
        <div class="flex items-center justify-center space-x-3 bg-white dark:bg-dark-card p-4 rounded-xl shadow-lg">
            <svg class="w-8 h-8 text-primary-indigo" fill="currentColor" viewBox="0 0 24 24">
                <path d="M10 15v-4.5H9v4.5a1 1 0 001 1h4a1 1 0 001-1v-4.5h-1v4.5h-3zM21 3H3C1.89 3 1 3.89 1 5v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm-9 16c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
            </svg>
            <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-50">YouTube SEO Master</h1>
        </div>
    </header>

    <!-- API Key Input Section -->
    <div id="apiKeySection" class="max-w-4xl mx-auto mb-6 bg-yellow-50 dark:bg-yellow-900 p-4 rounded-xl border border-yellow-200 dark:border-yellow-700">
        <div class="text-center">
            <h3 class="text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2">üîë Enter Your OpenRouter API Key</h3>
            <p class="text-sm text-yellow-700 dark:text-yellow-300 mb-3">Get your free API key from <a href="https://openrouter.ai/" target="_blank" class="underline font-medium">OpenRouter.ai</a></p>
            <div class="flex gap-2">
                <input type="password" id="apiKeyInput" placeholder="Enter your API key here..." class="flex-1 px-4 py-2 border border-yellow-300 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                <button onclick="saveApiKey()" class="bg-primary-indigo text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition duration-200">Save Key</button>
            </div>
            <p class="text-xs text-yellow-600 dark:text-yellow-400 mt-2">Your API key is stored locally in your browser and never shared</p>
        </div>
    </div>

    <!-- Main Application Card -->
    <main id="mainApp" class="max-w-4xl mx-auto bg-white dark:bg-dark-card p-6 rounded-2xl shadow-lg hidden">
        <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Instantly generate high-ranking titles, descriptions, keywords, and hashtags for your video.</p>
        
        <form id="optimizerForm">
            <div class="mb-4">
                <label for="prompt" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Video Topic/Title</label>
                <textarea id="prompt" rows="3" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none" placeholder="E.g., How to Edit Videos Faster in Premiere Pro"></textarea>
            </div>
            
            <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="languageSelect" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Output Language</label>
                    <select id="languageSelect" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                        <option value="English" selected>English</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Spanish">Spanish</option>
                        <option value="German">German</option>
                        <option value="French">French</option>
                    </select>
                </div>
                <div>
                    <label for="modelSelect" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">AI Model</label>
                    <select id="modelSelect" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
                        <option value="auto">Automatic (Recommended)</option>
                        <option value="deepseek/deepseek-r1">DeepSeek R1</option>
                        <option value="mistralai/mixtral-8x7b-instruct">Mixtral 8x7B</option>
                        <option value="meta-llama/llama-3-8b-instruct">Llama 3 8B</option>
                    </select>
                </div>
            </div>

            <button type="submit" id="generateButton" class="w-full bg-primary-indigo text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition duration-200">
                <span id="buttonText">Generate YouTube SEO Content</span>
            </button>
        </form>

        <div id="statusMessage" class="mt-4 text-center text-sm font-medium text-red-600 dark:text-red-400 hidden"></div>
        <div id="processingIndicator" class="mt-4 text-center text-primary-indigo dark:text-indigo-400 hidden">
            <svg class="animate-spin h-5 w-5 mr-2 inline-block" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span id="loadingText">Processing...</span>
        </div>
    </main>
    
    <!-- Results Area -->
    <div id="results" class="max-w-4xl mx-auto mt-6 space-y-4"></div>
    
    <!-- Footer Ad -->
    <div class="max-w-4xl mx-auto mt-8 mb-4 text-center">
        <div class="ad-banner">
            YouTube SEO Master - Free AI Tool
        </div>
    </div>

    <script>
        // Configuration - No API Key in source code
        const BASE_URL = "https://openrouter.ai/api/v1/chat/completions";
        const GITHUB_PAGES_URL = "https://gopemahendra661-gif.github.io/Youtube-SEO-Master/";
        
        const FREE_MODELS = [
            "deepseek/deepseek-r1",
            "mistralai/mixtral-8x7b-instruct", 
            "meta-llama/llama-3-8b-instruct"
        ];
        
        // DOM Elements
        const apiKeySection = document.getElementById('apiKeySection');
        const mainApp = document.getElementById('mainApp');
        const apiKeyInput = document.getElementById('apiKeyInput');
        const form = document.getElementById('optimizerForm');
        const promptInput = document.getElementById('prompt');
        const generateButton = document.getElementById('generateButton');
        const buttonText = document.getElementById('buttonText');
        const processingIndicator = document.getElementById('processingIndicator');
        const loadingText = document.getElementById('loadingText');
        const statusMessage = document.getElementById('statusMessage');
        const resultsDiv = document.getElementById('results');

        // Check for saved API key on load
        function checkApiKey() {
            const savedApiKey = localStorage.getItem('youtube_seo_api_key');
            if (savedApiKey) {
                apiKeySection.classList.add('hidden');
                mainApp.classList.remove('hidden');
                return savedApiKey;
            }
            return null;
        }

        // Save API key
        function saveApiKey() {
            const apiKey = apiKeyInput.value.trim();
            if (!apiKey) {
                alert('Please enter your API key');
                return;
            }
            
            if (!apiKey.startsWith('sk-or-')) {
                alert('Please enter a valid OpenRouter API key');
                return;
            }
            
            localStorage.setItem('youtube_seo_api_key', apiKey);
            apiKeySection.classList.add('hidden');
            mainApp.classList.remove('hidden');
        }

        // Get API key securely
        function getApiKey() {
            return localStorage.getItem('youtube_seo_api_key');
        }

        // Utility Functions
        function setAppState(isLoading, message = '') {
            generateButton.disabled = isLoading;
            processingIndicator.classList.toggle('hidden', !isLoading);
            
            if (isLoading) {
                loadingText.textContent = message || "Processing...";
                buttonText.innerHTML = '<svg class="animate-spin h-4 w-4 mr-2 inline-block" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Generating...';
            } else {
                buttonText.textContent = 'Generate YouTube SEO Content';
            }
        }

        // Secure API Call
        async function callApiWithRetry(model, prompt, language, retryCount = 0) {
            const apiKey = getApiKey();
            if (!apiKey) {
                throw new Error('API key not found. Please refresh and enter your API key.');
            }

            const systemPrompt = `You are a YouTube SEO expert. Generate SEO content in ${language} for: "${prompt}"
            
            Return ONLY JSON:
            {
                "seo_titles": "Title 1, Title 2, Title 3",
                "description": "Full description here...",
                "hashtags": "#tag1, #tag2, #tag3", 
                "keywords": "keyword1, keyword2, keyword3"
            }`;
            
            const payload = {
                model: model,
                messages: [
                    { role: "system", content: systemPrompt },
                    { role: "user", content: `Generate YouTube SEO for: ${prompt}` }
                ],
                temperature: 0.7,
                max_tokens: 1500
            };

            try {
                const response = await fetch(BASE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`,
                        'HTTP-Referer': GITHUB_PAGES_URL,
                        'X-Title': 'YouTube SEO Master',
                        'Origin': GITHUB_PAGES_URL
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 401) {
                        throw new Error('Invalid API key. Please check your OpenRouter API key.');
                    }
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.choices && data.choices[0] && data.choices[0].message) {
                    return {
                        model: model,
                        content: data.choices[0].message.content
                    };
                }
                
                throw new Error('No content in response');

            } catch (error) {
                console.error('API Call failed:', error);
                if (retryCount < 2) {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    return callApiWithRetry(model, prompt, language, retryCount + 1);
                }
                throw error;
            }
        }

        // Main Function
        async function generateResponse(e) {
            e.preventDefault();
            resultsDiv.innerHTML = '';
            statusMessage.classList.add('hidden');
            
            const userPrompt = promptInput.value.trim();
            const selectedModel = document.getElementById('modelSelect').value;
            const selectedLanguage = document.getElementById('languageSelect').value;

            if (!userPrompt) {
                statusMessage.textContent = "Please enter your Video Topic/Title.";
                statusMessage.classList.remove('hidden');
                return;
            }

            setAppState(true, `Generating content in ${selectedLanguage}...`);

            try {
                let finalResult = null;
                let modelsToTry = selectedModel === 'auto' ? FREE_MODELS : [selectedModel];

                for (const model of modelsToTry) {
                    loadingText.textContent = `Trying ${model.split('/')[1] || model}...`;
                    
                    try {
                        finalResult = await callApiWithRetry(model, userPrompt, selectedLanguage);
                        if (finalResult) break;
                    } catch (error) {
                        console.error(`Model ${model} failed:`, error);
                        continue;
                    }
                }

                if (!finalResult) {
                    const fallbackData = createFallbackResponse(userPrompt, selectedLanguage);
                    displayResults(fallbackData, 'Fallback Generator');
                    return;
                }

                let jsonContent;
                try {
                    let cleanContent = finalResult.content.replace(/```json\s*|\s*```/g, '').trim();
                    jsonContent = JSON.parse(cleanContent);
                } catch (parseError) {
                    jsonContent = createFallbackResponse(userPrompt, selectedLanguage);
                }

                displayResults(jsonContent, finalResult.model);

            } catch (error) {
                console.error('Error:', error);
                statusMessage.textContent = "Error: " + error.message;
                statusMessage.classList.remove('hidden');
                
                const fallbackData = createFallbackResponse(userPrompt, selectedLanguage);
                displayResults(fallbackData, 'Fallback Generator');
            } finally {
                setAppState(false);
            }
        }

        // Fallback content generator
        function createFallbackResponse(prompt, language) {
            if (language === 'Hindi') {
                return {
                    seo_titles: `${prompt} - ‡§™‡•Ç‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä, ${prompt} ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç, ${prompt} ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤`,
                    description: `‡§á‡§∏ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§Æ‡•á‡§Ç ‡§π‡§Æ ${prompt} ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§Ç‡§ó‡•á‡•§ ‡§∏‡•ç‡§ü‡•á‡§™ ‡§¨‡§æ‡§Ø ‡§∏‡•ç‡§ü‡•á‡§™ ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§î‡§∞ ‡§™‡•ç‡§∞‡•ã‡§´‡•á‡§∂‡§®‡§≤ ‡§ü‡§ø‡§™‡•ç‡§∏ ‡§ú‡§æ‡§®‡•á‡§Ç‡•§\n\n‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§™‡§∏‡§Ç‡§¶ ‡§Ü‡§è ‡§§‡•ã LIKE üëç ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ CHANNEL SUBSCRIBE üîî ‡§ï‡§∞‡•á‡§Ç!\n\n#${prompt.replace(/\s+/g, '')} #‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤ #‡§π‡§ø‡§Ç‡§¶‡•Ä`,
                    hashtags: `#${prompt.replace(/\s+/g, '')}, #YouTube, #‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤, #‡§π‡§ø‡§Ç‡§¶‡•Ä`,
                    keywords: `${prompt}, ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§ü‡•ç‡§Ø‡•Ç‡§ü‡•ã‡§∞‡§ø‡§Ø‡§≤, ‡§∏‡•Ä‡§ñ‡•á‡§Ç, ‡§ó‡§æ‡§á‡§°, ‡§ü‡§ø‡§™‡•ç‡§∏`
                };
            }
            
            return {
                seo_titles: `${prompt} - Complete Guide, How to ${prompt} - Step by Step, ${prompt} Tutorial`,
                description: `In this video, we cover everything about ${prompt}. Learn professional techniques and best practices.\n\nDon't forget to LIKE üëç and SUBSCRIBE üîî!\n\n#${prompt.replace(/\s+/g, '')} #Tutorial #HowTo`,
                hashtags: `#${prompt.replace(/\s+/g, '')}, #YouTube, #Tutorial, #HowTo`,
                keywords: `${prompt}, tutorial, how to, guide, tips`
            };
        }

        function displayResults(data, modelUsed) {
            const seoTitles = data.seo_titles || 'No titles generated';
            const description = data.description || 'No description generated';
            const hashtags = data.hashtags || 'No hashtags generated';
            const keywords = data.keywords || 'No keywords generated';

            const outputHTML = `
                <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-2xl border-2 border-green-500">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 text-center">‚úÖ YouTube SEO Content Generated!</h2>
                    
                    <div class="mb-6 p-4 bg-white dark:bg-dark-card rounded-xl">
                        <h3 class="font-bold text-lg text-blue-600 dark:text-blue-400 mb-3">‚ú® SEO Title Suggestions</h3>
                        <div class="flex flex-wrap gap-2">
                            ${seoTitles.split(',').map(title => 
                                `<span class="inline-block bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm px-3 py-1 rounded-lg">${title.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-white dark:bg-dark-card rounded-xl">
                        <h3 class="font-bold text-lg text-green-600 dark:text-green-400 mb-3">üìù Video Description</h3>
                        <div class="bg-gray-50 dark:bg-gray-800 p-3 rounded-lg">
                            <p class="text-gray-700 dark:text-gray-300 whitespace-pre-wrap">${description}</p>
                        </div>
                    </div>
                    
                    <div class="mb-6 p-4 bg-white dark:bg-dark-card rounded-xl">
                        <h3 class="font-bold text-lg text-purple-600 dark:text-purple-400 mb-3">üè∑Ô∏è Keywords & Tags</h3>
                        <div class="flex flex-wrap gap-2">
                            ${keywords.split(',').map(keyword => 
                                `<span class="inline-block bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm px-3 py-1 rounded-lg">${keyword.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="p-4 bg-white dark:bg-dark-card rounded-xl">
                        <h3 class="font-bold text-lg text-pink-600 dark:text-pink-400 mb-3">#Ô∏è‚É£ Hashtags</h3>
                        <div class="flex flex-wrap gap-2">
                            ${hashtags.split(',').map(hashtag => 
                                `<span class="inline-block bg-pink-100 dark:bg-pink-900 text-pink-800 dark:text-pink-200 text-sm px-3 py-1 rounded-lg">${hashtag.trim()}</span>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div class="mt-6 p-4 bg-yellow-50 dark:bg-yellow-900 rounded-xl text-center">
                        <p class="text-sm text-yellow-800 dark:text-yellow-200">
                            *AI-Generated Content - Please review before use<br>
                            <span class="font-mono">Model: ${modelUsed}</span>
                        </p>
                    </div>
                </div>
            `;
            
            resultsDiv.innerHTML = outputHTML;
        }

        // Copy function
        function copyContent(text, buttonElement) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = buttonElement.innerHTML;
                buttonElement.innerHTML = '‚úì Copied!';
                buttonElement.style.background = '#10b981';
                setTimeout(() => {
                    buttonElement.innerHTML = originalText;
                    buttonElement.style.background = '';
                }, 2000);
            });
        }

        // Clear API key (for testing)
        function clearApiKey() {
            localStorage.removeItem('youtube_seo_api_key');
            location.reload();
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            checkApiKey();
        });

        // Event Listeners
        form.addEventListener('submit', generateResponse);
        window.copyContent = copyContent;
        window.clearApiKey = clearApiKey; // For debugging

        console.log('YouTube SEO Master - Secure Version Loaded');
    </script>
</body>
</html>
